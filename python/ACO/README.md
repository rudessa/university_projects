

---
# **Алгоритм муравьиной колонии** 

(Ant Colony Optimization, ACO), предназначенный для решения задачи поиска оптимального пути в графе. Алгоритм использует эвристические методы и имитацию поведения муравьев для нахождения минимального пути.

## Структура проекта

### 1. **Папка `aco`** (Модуль муравьиной колонии)
   - **`AntColony`** — основной класс, управляющий процессом оптимизации.
   - Импорты:
     - `matplotlib.pyplot` для визуализации.
     - `numpy` для работы с данными.
     - `ant.Ant` — вспомогательный класс для муравьев.

### 2. **Папка `ant`** (Модуль для класса муравья)
   - **`Ant`** — класс, моделирующий поведение одного муравья.

### 3. **Папка `graph`** (Модуль графов)
   - **`Graph`** — класс для управления графом.
   - Использует узлы из модуля `node`.

### 4. **Папка `node`** (Модуль узлов графа)
   - **`Node`** — класс для представления узлов графа.

### 5. **Пример использования** (`example1.py`)
   - Демонстрация работы алгоритма с конкретным графом.

---

## Логика работы

Алгоритм муравьиной колонии основан на имитации поведения реальных муравьев, которые прокладывают пути между узлами графа. Основные этапы:

1. **Инициализация:**
   - Задаются параметры алгоритма: количество муравьев, скорость испарения феромонов, количество итераций и др.
   - Инициализируется граф и таблицы феромонов.

2. **Поиск пути:**
   - Каждая итерация состоит из муравьев, проходящих по графу, чтобы построить маршруты.
   - Муравьи выбирают узлы на основе вероятностей, зависящих от:
     - **Феромонов** (опыт предыдущих итераций).
     - **Эвристической информации** (обратная величина веса ребра).

3. **Обновление феромонов:**
   - Успешные пути получают больше феромонов.
   - Феромоны испаряются, чтобы стимулировать исследования новых маршрутов.

4. **Визуализация:**
   - Строятся графики длины путей и вероятности выбора лучшего пути.

---

## Описание классов и функций

### ### Класс **AntColony**

Этот класс управляет процессом оптимизации.

#### **Методы:**

- **`__init__`**
  - Инициализирует алгоритм.
  - Параметры:
    - `graph` — граф для поиска пути.
    - `ant_count` — количество муравьев.
    - `alpha`, `beta` — параметры для влияния феромонов и эвристики.
    - `pheromone_evaporation_rate` — скорость испарения феромонов.
    - `pheromone_constant` — количество феромонов, добавляемых на успешный путь.
    - `iterations` — количество итераций.

- **`run`**
  - Основной метод запуска алгоритма.
  - Возвращает лучший путь и его стоимость.

- **`construct_solution`**
  - Строит маршрут для одного муравья.
  - Возвращает успех маршрута и его стоимость.

- **`choose_next_node`**
  - Выбирает следующий узел на основе вероятностей.

- **`calculate_path_cost`**
  - Вычисляет стоимость маршрута.

- **`update_tmp_pheromones`**
  - Обновляет временные феромоны.

- **`update_pheromones`**
  - Обновляет феромоны с учетом испарения.

- **`plot_graphs`**
  - Строит график изменения длины пути.

- **`calculate_best_path_probability`**
  - Рассчитывает вероятность выбора лучшего пути.

- **`plot_best_path_probability`**
  - Строит график вероятности выбора лучшего пути.

---

### Класс **Ant**

Моделирует поведение одного муравья.

#### **Методы:**

- **`__init__`**
  - Инициализация параметров муравья.

- **`reset`**
  - Сбрасывает маршрут муравья для новой итерации.

---

### Класс **Graph**

Управляет графом.

#### **Методы:**

- **`add_node`**
  - Добавляет узел в граф.

- **`add_edge`**
  - Добавляет ребро между узлами с указанным весом.

- **`get_neighbors`**
  - Возвращает соседей узла.

- **`get_weight`**
  - Возвращает вес ребра между двумя узлами.

---

### Класс **Node**

Представляет узел графа.

#### **Методы:**

- **`add_edge`**
  - Добавляет ребро к узлу.

---

## Пример использования

Код из `example1.py`:

```python
from aco import AntColony
from graph import Graph

# Создаем граф
graph = Graph()
edges = [
    (0, 1, 3),  # Ребро между вершинами 0 и 1 с весом 3
    (0, 4, 1),  # Ребро между вершинами 0 и 4 с весом 1
    (1, 2, 18), # Ребро между вершинами 1 и 2 с весом 18
    (1, 5, 3),  # Ребро между вершинами 1 и 5 с весом 3
    (2, 3, 1),  # Ребро между вершинами 2 и 3 с весом 1
    (2, 5, 1),  # Ребро между вершинами 2 и 5 с весом 1
    (3, 4, 1),  # Ребро между вершинами 3 и 4 с весом 1
    (3, 5, 5),  # Ребро между вершинами 3 и 5 с весом 5
    (4, 5, 4)   # Ребро между вершинами 4 и 5 с весом 4
]

for edge in edges:
    graph.add_edge(*edge)

# Настраиваем колонию
colony = AntColony(graph, start_node=0, ant_count=10, iterations=100)
best_path, best_cost = colony.run()

print(f"Best path: {best_path}")
print(f"Best cost: {best_cost}")

colony.plot_graphs()
```

#### Выход:

-**Best path**: [0, 1, 5, 2, 3, 4, 0]
-**Best cost**: 10

---

## Схема работы

```plaintext
Инициализация:
  - Граф -> Узлы и ребра
  - Колония -> Параметры алгоритма
  
Цикл поиска (по итерациям):
  1. Каждый муравей строит маршрут:
     - Выбор следующего узла на основе феромонов и эвристики.
  2. Проверка успеха маршрута.
  3. Обновление феромонов:
     - Добавление феромонов на успешные маршруты.
     - Испарение феромонов.
```

---

